(function(){"use strict";var t={4739:function(t,s,e){var i=e(144),o=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"page"},[s("HeadBar"),s("router-view")],1)])},a=[],n=function(){var t=this,s=t._self._c;return s("header",{staticClass:"header"},[s("span",{staticClass:"logo",on:{click:t.goIndex}},[t._v("bluebell")]),t._m(0),s("div",{staticClass:"btns"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}]},[s("a",{staticClass:"login-btn",on:{click:t.goLogin}},[t._v("登录")]),s("a",{staticClass:"login-btn",on:{click:t.goSignUp}},[t._v("注册")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"user-box"},[s("span",{staticClass:"user"},[t._v(t._s(t.currUsername))]),s("div",{staticClass:"dropdown-content"},[s("a",{on:{click:t.goLogout}},[t._v("登出")])])])])])},l=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("label",{staticClass:"s-logo"}),s("input",{staticClass:"s-input",attrs:{type:"text",placeholder:"搜索"}})])}],r=(e(7658),{name:"HeadBar",created(){this.$store.commit("init")},computed:{isLogin(){return this.$store.getters.isLogin},currUsername(){return console.log(this.$store.getters.username),this.$store.getters.username}},methods:{goIndex(){this.$router.push({name:"Home"})},goLogin(){this.$router.push({name:"Login"})},goSignUp(){this.$router.push({name:"SignUp"})},goLogout(){this.$store.commit("logout")}}}),c=r,u=e(1001),m=(0,u.Z)(c,n,l,!1,null,"75d7d08c",null),d=m.exports,p={components:{HeadBar:d}},v=p,h=(0,u.Z)(v,o,a,!1,null,null,null),g=h.exports,C=e(8345),f=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("div",{staticClass:"c-l-header"},[s("div",{staticClass:"new btn-iconfont",class:{active:t.timeOrder},on:{click:function(s){return t.selectOrder("time")}}},[s("i",{staticClass:"iconfont icon-polygonred"}),t._v("New ")]),s("div",{staticClass:"top btn-iconfont",class:{active:t.scoreOrder},on:{click:function(s){return t.selectOrder("score")}}},[s("i",{staticClass:"iconfont icon-top"}),t._v("Score ")]),s("button",{staticClass:"btn-publish",on:{click:t.goPublish}},[t._v("发表")])]),s("ul",{staticClass:"c-l-list"},t._l(t.postList,(function(e){return s("li",{key:e.id,staticClass:"c-l-item"},[s("div",{staticClass:"post"},[s("a",{staticClass:"vote"},[s("span",{staticClass:"iconfont icon-up",on:{click:function(s){return t.vote(e.id,"1")}}})]),s("span",{staticClass:"text"},[t._v(t._s(e.vote_num))]),s("a",{staticClass:"vote"},[s("span",{staticClass:"iconfont icon-down",on:{click:function(s){return t.vote(e.id,"-1")}}})])]),s("div",{staticClass:"l-container",on:{click:function(s){return t.goDetail(e.id)}}},[s("h4",{staticClass:"con-title"},[t._v(t._s(e.title))]),s("div",{staticClass:"con-memo"},[s("p",[t._v(t._s(e.content))])])])])})),0)]),t._m(0)])},_=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"right"},[s("div",{staticClass:"communities"},[s("h2",{staticClass:"r-c-title"},[t._v("今日火热频道排行榜")]),s("ul",{staticClass:"r-c-content"},[s("li",{staticClass:"r-c-item"},[s("span",{staticClass:"index"},[t._v("1")]),s("i",{staticClass:"icon"}),t._v(" b/coding ")]),s("li",{staticClass:"r-c-item"},[s("span",{staticClass:"index"},[t._v("2")]),s("i",{staticClass:"icon"}),t._v(" b/tree_hole ")]),s("li",{staticClass:"r-c-item"},[s("span",{staticClass:"index"},[t._v("3")]),s("i",{staticClass:"icon"}),t._v(" b/job ")])]),s("button",{staticClass:"view-all"},[t._v("查看所有")])]),s("div",{staticClass:"r-trending"},[s("h2",{staticClass:"r-t-title"},[t._v("持续热门频道")]),s("ul",{staticClass:"rank"},[s("li",{staticClass:"r-t-cell"},[s("div",{staticClass:"r-t-cell-info"},[s("div",{staticClass:"avatar"}),s("div",{staticClass:"info"},[s("span",{staticClass:"info-title"},[t._v("b/Book")]),s("p",{staticClass:"info-num"},[t._v("7.1k members")])])]),s("button",{staticClass:"join-btn"},[t._v("JOIN")])]),s("li",{staticClass:"r-t-cell"},[s("div",{staticClass:"r-t-cell-info"},[s("div",{staticClass:"avatar"}),s("div",{staticClass:"info"},[s("span",{staticClass:"info-title"},[t._v("b/coding")]),s("p",{staticClass:"info-num"},[t._v("3.2k members")])])]),s("button",{staticClass:"join-btn"},[t._v("JOIN")])]),s("li",{staticClass:"r-t-cell"},[s("div",{staticClass:"r-t-cell-info"},[s("div",{staticClass:"avatar"}),s("div",{staticClass:"info"},[s("span",{staticClass:"info-title"},[t._v("b/job")]),s("p",{staticClass:"info-num"},[t._v("2.5k members")])])]),s("button",{staticClass:"join-btn"},[t._v("JOIN")])])])])])}],b={name:"Home",components:{},data(){return{order:"time",page:1,postList:[]}},methods:{selectOrder(t){this.order=t,this.getPostList()},goPublish(){this.$router.push({name:"Publish"})},goDetail(t){this.$router.push({name:"Content",params:{id:t}})},getPostList(){this.$axios({method:"get",url:"/posts2",params:{page:this.page,order:this.order}}).then((t=>{console.log(t.data,222),1e3==t.code?this.postList=t.data:console.log(t.msg)})).catch((t=>{console.log(t)}))},vote(t,s){this.$axios({method:"post",url:"/vote",data:JSON.stringify({post_id:t,direction:s})}).then((t=>{1e3==t.code?console.log("vote success"):console.log(t.msg)})).catch((t=>{console.log(t)}))}},mounted:function(){this.getPostList()},computed:{timeOrder(){return"time"==this.order},scoreOrder(){return"score"==this.order}}},w=b,y=(0,u.Z)(w,f,_,!1,null,"2baf73fc",null),x=y.exports,P=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"l-container"},[s("h4",{staticClass:"con-title"},[t._v(t._s(t.post.title))]),s("div",{staticClass:"con-info"},[t._v(t._s(t.post.content))]),t._m(1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"topic-info"},[s("h5",{staticClass:"t-header"}),s("div",{staticClass:"t-info"},[s("a",{staticClass:"avatar"}),s("span",{staticClass:"topic-name"},[t._v("b/"+t._s(t.post.community_name))])]),s("p",{staticClass:"t-desc"},[t._v("树洞 树洞 无限树洞的树洞")]),t._m(2),s("div",{staticClass:"date"},[t._v("Created Apr 10, 2008")]),s("button",{staticClass:"topic-btn"},[t._v("JOIN")])])])])},L=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"post"},[s("a",{staticClass:"vote"},[s("span",{staticClass:"iconfont icon-up"})]),s("span",{staticClass:"text"},[t._v("50.2k")]),s("a",{staticClass:"vote"},[s("span",{staticClass:"iconfont icon-down"})])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"user-btn"},[s("span",{staticClass:"btn-item"},[s("i",{staticClass:"iconfont icon-comment"}),t._v("comment ")])])},function(){var t=this,s=t._self._c;return s("ul",{staticClass:"t-num"},[s("li",{staticClass:"t-num-item"},[s("p",{staticClass:"number"},[t._v("5.2m")]),s("span",{staticClass:"unit"},[t._v("Members")])]),s("li",{staticClass:"t-num-item"},[s("p",{staticClass:"number"},[t._v("5.2m")]),s("span",{staticClass:"unit"},[t._v("Members")])])])}],k={name:"Content",data(){return{post:{}}},methods:{getPostDetail(){this.$axios({method:"get",url:"/post/"+this.$route.params.id}).then((t=>{console.log(1,t.data),1e3==t.code?this.post=t.data:console.log(t.msg)})).catch((t=>{console.log(t)}))}},mounted:function(){this.getPostDetail()}},O=k,$=(0,u.Z)(O,P,L,!1,null,"4466eba1",null),N=$.exports,Z=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("div",{staticClass:"post-name"},[t._v("我好想写点什么")]),s("div",{staticClass:"post-type"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectCommunity.name,expression:"selectCommunity.name"}],staticClass:"post-type-value",attrs:{type:"text",placeholder:"选择一个频道"},domProps:{value:t.selectCommunity.name},on:{click:function(s){return t.showCommunity()},input:function(s){s.target.composing||t.$set(t.selectCommunity,"name",s.target.value)}}}),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.showCommunityList,expression:"showCommunityList"}],staticClass:"post-type-options"},t._l(t.communityList,(function(e,i){return s("li",{key:e.id,staticClass:"post-type-cell",on:{click:function(s){return t.selected(i)}}},[t._v(" "+t._s(e.name)+" ")])})),0),s("i",{staticClass:"p-icon"})]),s("div",{staticClass:"post-content"},[t._m(0),s("div",{staticClass:"post-sub-container"},[s("div",{staticClass:"post-sub-header"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"post-title",attrs:{id:"",cols:"30",rows:"10",placeholder:"标题"},domProps:{value:t.title},on:{input:function(s){s.target.composing||(t.title=s.target.value)}}}),s("span",{staticClass:"textarea-num"},[t._v("0/300")])]),s("div",{staticClass:"post-text-con"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"post-content-t",attrs:{id:"",cols:"30",rows:"10",placeholder:"内容"},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}})])]),s("div",{staticClass:"post-footer"},[s("div",{staticClass:"btns"},[s("button",{staticClass:"btn"},[t._v("取消")]),s("button",{staticClass:"btn",on:{click:function(s){return t.submit()}}},[t._v("发表")])])])])]),t._m(1)])},S=[function(){var t=this,s=t._self._c;return s("ul",{staticClass:"cat"},[s("li",{staticClass:"cat-item active"},[s("i",{staticClass:"iconfont icon-edit"}),t._v("post ")]),s("li",{staticClass:"cat-item"},[s("i",{staticClass:"iconfont icon-image"}),t._v("image/video ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"right"},[s("div",{staticClass:"post-rank"},[s("h5",{staticClass:"p-r-title"},[s("i",{staticClass:"p-r-icon"}),t._v("发帖规范 ")]),s("ul",{staticClass:"p-r-content"},[s("li",{staticClass:"p-r-item"},[t._v("1.网络不是法外之地")]),s("li",{staticClass:"p-r-item"},[t._v("2.网络不是法外之地")]),s("li",{staticClass:"p-r-item"},[t._v("3.网络不是法外之地")])])])])}],R={name:"Publish",data(){return{title:"",content:"",showCommunityList:!1,selectCommunity:{},communityList:[]}},methods:{submit(){this.$axios({method:"post",url:"/post",data:JSON.stringify({title:this.title,content:this.content,community_id:this.selectCommunity.id})}).then((t=>{console.log(t.data),1e3==t.code?this.$router.push({path:this.redirect||"/"}):console.log(t.msg)})).catch((t=>{console.log(t)}))},getCommunityList(){this.$axios({method:"get",url:"/community"}).then((t=>{console.log(t.data),1e3==t.code?this.communityList=t.data:console.log(t.msg)})).catch((t=>{console.log(t)}))},showCommunity(){this.showCommunityList=!this.showCommunityList},selected(t){this.selectCommunity=this.communityList[t],this.showCommunityList=!1,console.log(this.selectCommunity)}},mounted:function(){this.getCommunityList()}},I=R,j=(0,u.Z)(I,Z,S,!1,null,"6236a644",null),J=j.exports,U=function(){var t=this,s=t._self._c;return s("div",{staticClass:"main"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"form-title"},[t._v("登录")]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("用户名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name",placeholder:"用户名"},domProps:{value:t.username},on:{input:function(s){s.target.composing||(t.username=s.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"pass"}},[t._v("密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"pass",id:"pass",placeholder:"密码"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),s("div",{staticClass:"form-btn"},[s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])])])])},H=[],B={name:"Login",data(){return{username:"",password:"",submitted:!1}},computed:{},created(){},methods:{submit(){this.$axios({method:"post",url:"/login",data:JSON.stringify({username:this.username,password:this.password})}).then((t=>{console.log(1111),console.log(t.data),1e3==t.code?(localStorage.setItem("loginResult",JSON.stringify(t.data)),this.$store.commit("login",t.data),this.$router.push({path:this.redirect||"/"})):console.log(t.msg)})).catch((t=>{console.log(t)}))}}},D=B,A=(0,u.Z)(D,U,H,!1,null,"3a2045bc",null),T=A.exports,q=function(){var t=this,s=t._self._c;return s("div",{staticClass:"main"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"form-title"},[t._v("注册")]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("用户名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name",placeholder:"用户名"},domProps:{value:t.username},on:{input:function(s){s.target.composing||(t.username=s.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"pass"}},[t._v("密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"pass",id:"pass",placeholder:"密码"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"re_pass"}},[t._v("确认密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm_password,expression:"confirm_password"}],staticClass:"form-control",attrs:{type:"password",name:"re_pass",id:"re_pass",placeholder:"确认密码"},domProps:{value:t.confirm_password},on:{input:function(s){s.target.composing||(t.confirm_password=s.target.value)}}})]),s("div",{staticClass:"form-btn"},[s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])])])])},E=[],M={name:"SignUp",data(){return{username:"",password:"",confirm_password:"",submitted:!1}},computed:{},created(){},methods:{submit(){this.$axios({method:"post",url:"/signup",data:JSON.stringify({username:this.username,password:this.password,confirm_password:this.confirm_password})}).then((t=>{console.log(t.data),1e3==t.code?(console.log("signup success"),this.$router.push({name:"Login"})):console.log(t.msg)})).catch((t=>{console.log(t)}))}}},z=M,F=(0,u.Z)(z,q,E,!1,null,"61f1d9ff",null),G=F.exports;const K=C.ZP.prototype.push;C.ZP.prototype.push=function(t){return K.call(this,t).catch((t=>t))},i.ZP.use(C.ZP);const Q=[{path:"/",name:"Home",component:x},{path:"/post/:id",name:"Content",component:N},{path:"/publish",name:"Publish",component:J,meta:{requireAuth:!0}},{path:"/login",name:"Login",component:T},{path:"/signup",name:"SignUp",component:G}],V=new C.ZP({mode:"history",base:"/",routes:Q});var W=V,X=e(629);i.ZP.use(X.ZP);const Y={token:null,user_id:null,user_name:null};var tt=new X.ZP.Store({state:{isLogin:!1,loginResult:Y},mutations:{init(t){let s=JSON.parse(localStorage.getItem("loginResult"));console.log(localStorage.getItem("loginResult")),null!=s&&(t.loginResult=s)},login(t,s){t.loginResult=s},logout(t){localStorage.removeItem("loginResult"),t.loginResult=Y}},actions:{},getters:{isLogin:t=>null!==t.loginResult.user_id,userID:t=>t.loginResult.user_id,username:t=>t.loginResult.user_name,accessToken:t=>t.loginResult.token}}),st=e(6154);st.Z.defaults.baseURL="/api/v1/",st.Z.interceptors.request.use((t=>{let s=JSON.parse(localStorage.getItem("loginResult"));if(s){const e=s.token;t.headers.Authorization=`Bearer ${e}`}return t}),(t=>Promise.reject(t))),st.Z.interceptors.response.use((t=>200===t.status?Promise.resolve(t.data):Promise.reject(t.data)),(t=>{console.log("error",t)}));var et=st.Z;i.ZP.prototype.$axios=et,i.ZP.config.productionTip=!1,W.beforeEach(((t,s,e)=>{console.log(t),console.log(s),t.meta.requireAuth?localStorage.getItem("loginResult")||"/login"===t.path?e():e({path:"/login"}):e(),"/login"==t.fullPath&&(localStorage.getItem("loginResult")?e({path:s.fullPath}):e())})),new i.ZP({router:W,store:tt,render:t=>t(g)}).$mount("#app")}},s={};function e(i){var o=s[i];if(void 0!==o)return o.exports;var a=s[i]={exports:{}};return t[i](a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(s,i,o,a){if(!i){var n=1/0;for(u=0;u<t.length;u++){i=t[u][0],o=t[u][1],a=t[u][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||n>=a)&&Object.keys(e.O).every((function(t){return e.O[t](i[r])}))?i.splice(r--,1):(l=!1,a<n&&(n=a));if(l){t.splice(u--,1);var c=o();void 0!==c&&(s=c)}}return s}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[i,o,a]}}(),function(){e.d=function(t,s){for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,i){var o,a,n=i[0],l=i[1],r=i[2],c=0;if(n.some((function(s){return 0!==t[s]}))){for(o in l)e.o(l,o)&&(e.m[o]=l[o]);if(r)var u=r(e)}for(s&&s(i);c<n.length;c++)a=n[c],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(u)},i=self["webpackChunkbluebell_frontend"]=self["webpackChunkbluebell_frontend"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(4739)}));i=e.O(i)})();
//# sourceMappingURL=app.586e3f70.js.map